---
import BaseHead from '@Components/BaseHead.astro';
import { sortPostByDate } from '@Tools/post';
import type { Post } from '@Models/GeneralTypes';

const allPosts = await Astro.glob<Post>('../pages/posts/**/*.md');
const sortedPosts = sortPostByDate(allPosts);
const firstTenPosts = sortedPosts.slice(0, 10);
---

<html lang="en">
  <head>
    <BaseHead title="普通文組 2.0" description="tzyn blog v2 index" />
  </head>
  <body>
    <h1>普通文組 2.0</h1>
    {
      firstTenPosts.map((post) => (
        <li>
          <a href={post.url}>{post.frontmatter.title}</a>
          <div>{post.frontmatter.date}</div>
          <div>{post.frontmatter.tag}</div>
          {post.frontmatter.banner && <img src={post.frontmatter.banner} />}
          {post.frontmatter.summary && (
            <div set:html={post.frontmatter.summary} />
          )}
        </li>
      ))
    }
  </body>
</html>
