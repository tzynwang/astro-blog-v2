<!DOCTYPE html>
<html lang="en" class="astro-D4ZPMAD2">
  <head>
    <!-- Global Metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="sitemap" href="/sitemap-index.xml">
    <meta name="generator" content="Astro v2.10.12">

    <!-- Primary Meta Tags -->
    <title>ç‚ºä»€éº¼åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ä½¿ç”¨while loopåŸ·è¡Œajax requestæœƒè®“é é¢é™·å…¥å‡çµç‹€æ…‹ï¼Ÿ</title>
    <meta name="title" content="ç‚ºä»€éº¼åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ä½¿ç”¨while loopåŸ·è¡Œajax requestæœƒè®“é é¢é™·å…¥å‡çµç‹€æ…‹ï¼Ÿ">
    <meta name="description" content="">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tzynwang.github.io/post/2021/while-loop-ajax/">
    <meta property="og:title" content="ç‚ºä»€éº¼åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ä½¿ç”¨while loopåŸ·è¡Œajax requestæœƒè®“é é¢é™·å…¥å‡çµç‹€æ…‹ï¼Ÿ">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tzynwang.github.io/post/2021/while-loop-ajax/">
    <meta property="twitter:title" content="ç‚ºä»€éº¼åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ä½¿ç”¨while loopåŸ·è¡Œajax requestæœƒè®“é é¢é™·å…¥å‡çµç‹€æ…‹ï¼Ÿ">
    <meta property="twitter:description" content="">
    <meta property="twitter:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/_astro/index.5f60e57f.css" />
<link rel="stylesheet" href="/_astro/2-1-movie-list-i18n-note.5f900e92.css" /></head>
  <body class="astro-D4ZPMAD2">
    <section class="side-contnet astro-D4ZPMAD2">
      <h1 class="astro-D4ZPMAD2">æ™®é€šæ–‡çµ„ 2.0</h1>
      <nav class="astro-D4ZPMAD2">
        <a href="/" class="astro-D4ZPMAD2">é¦–é </a>
        <a href="/archive" class="astro-D4ZPMAD2">å…¨æ–‡ç« æ­¸æª”</a>
      </nav>
    </section>
    <section class="main-content astro-D4ZPMAD2">
      
  <div class="post-container astro-QTOKGA5Y">
    <h1 class="astro-QTOKGA5Y">ç‚ºä»€éº¼åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ä½¿ç”¨while loopåŸ·è¡Œajax requestæœƒè®“é é¢é™·å…¥å‡çµç‹€æ…‹ï¼Ÿ</h1>
    <div class="info astro-QTOKGA5Y">
      <span class="astro-QTOKGA5Y">2021-04-08 21:10</span>
      <span class="astro-QTOKGA5Y"><span class="astro-2IYMVI75">
  JavaScript
</span></span>
      <ul class="astro-QTOKGA5Y">
        <li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç’°å¢ƒ" class="astro-QTOKGA5Y">ç’°å¢ƒ</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#åŸå§‹é¡Œç›®" class="astro-QTOKGA5Y">åŸå§‹é¡Œç›®</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#é­é‡å•é¡Œ" class="astro-QTOKGA5Y">é­é‡å•é¡Œ</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#å•é¡ŒèƒŒå¾Œçš„è„ˆçµ¡æ¢³ç†" class="astro-QTOKGA5Y">å•é¡ŒèƒŒå¾Œçš„è„ˆçµ¡æ¢³ç†</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#çµè«–" class="astro-QTOKGA5Y">çµè«–</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#æ­¤å•é¡Œçš„è§£æ±ºæ–¹å¼" class="astro-QTOKGA5Y">æ­¤å•é¡Œçš„è§£æ±ºæ–¹å¼</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#è£œå……" class="astro-QTOKGA5Y">è£œå……</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#åƒè€ƒæ–‡ä»¶" class="astro-QTOKGA5Y">åƒè€ƒæ–‡ä»¶</a>
            </li>
      </ul>
    </div>
    <h2 id="ç’°å¢ƒ">ç’°å¢ƒ</h2>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #e1e4e8">Google Chrome: 89.0.4389.114 (Official Build) (64-bit)</span></span>
<span class="line"><span style="color: #e1e4e8">os: Windows_NT 10.0.18363 win32 x64</span></span></code></pre>
<h2 id="åŸå§‹é¡Œç›®">åŸå§‹é¡Œç›®</h2>
<p>ALPHA Camp å­¸æœŸ 2-2ï¼šè«‹å‘ <a href="https://randomuser.me/">RANDOM USER GENERATOR</a> é€™æ”¯ API ç´¢å–è³‡æ–™ï¼Œä¸¦åœ¨ç€è¦½å™¨ç•«é¢ä¸Šé»æ“ŠæŒ‰éˆ•å¾Œï¼Œè¼¸å‡ºä¸‰ä½ã€Œåªæœ‰å¥³æ€§ã€çš„è³‡æ–™ã€‚</p>
<h2 id="é­é‡å•é¡Œ">é­é‡å•é¡Œ</h2>
<p>æœ€åˆæƒ³è¦ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼ç¢¼ä¾†éæ¿¾ API å›å‚³çš„è³‡æ–™ï¼Œä½†æœƒè®“ç€è¦½å™¨åˆ†é é™·å…¥å‡çµç‹€æ…‹ï¼š</p>
<script src="https://gist.github.com/tzynwang/b7049eb35ec2a9950f4c48f1fdd48c28.js"></script>
<h2 id="å•é¡ŒèƒŒå¾Œçš„è„ˆçµ¡æ¢³ç†">å•é¡ŒèƒŒå¾Œçš„è„ˆçµ¡æ¢³ç†</h2>
<p>åŸºæœ¬ä¸Š Philip Roberts çš„å½±ç‰‡å›ç­”äº†ã€Œç‚ºä»€éº¼ä»¥ä¸Šç¨‹å¼ç¢¼æœƒé€ æˆç€è¦½å™¨å‡çµï¼Ÿã€çš„å•é¡Œï¼š</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8aGhZQkoFbQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<ul>
<li>V8ï¼ˆChrome çš„ JavaScript runtimeï¼‰æœ¬èº«åƒ…åŒ…å« call stack èˆ‡ heapï¼ŒV8 çš„åŸå§‹ç¢¼æ²’æœ‰<code>setTimeout()</code>ã€<code>XMLHttpRequest</code>ï¼ˆå¯¦ç¾ ajax çš„ APIï¼‰ç­‰å…§å®¹</li>
<li><code>setTimeout()</code>èˆ‡<code>XMLHttpRequest</code>ä¸¦éç”± ECMAScript å®šç¾©ï¼Œåœ¨ MDN æ–‡ä»¶ä¸­ï¼Œé€™å…©å€‹åŠŸèƒ½åˆ†åˆ¥ç”± HTML Living Standard èˆ‡ XMLHttpRequest Living Standard è¦ç¯„
<ul>
<li><code>setTimeout()</code>: <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout">HTML Living Standard</a></li>
<li><code>XMLHttpRequest</code>: <a href="https://xhr.spec.whatwg.org/">XMLHttpRequest Living Standard</a></li>
</ul>
</li>
<li><code>setTimeout()</code>èˆ‡<code>XMLHttpRequest</code>çš„ callback function æœƒåœç•™åœ¨ callback queueï¼Œç­‰å¾… stack è£¡é¢çš„ task è¢«æ¸…ç©ºå¾Œï¼Œé€™äº›åœç•™åœ¨ callback queue çš„ task æ‰æœƒè¢«åŸ·è¡Œ</li>
<li>ç€è¦½å™¨åˆ†é ç•¶æ©Ÿçš„åŸå› æ˜¯ï¼šæˆ‘è«‹ JavaScript åœ¨ user array é•·åº¦æ²’æœ‰å¤§æ–¼ 4 å‰ï¼Œä¸åœåŸ·è¡Œ<code>getFemaleUser()</code>æ­¤åŠŸèƒ½
<ul>
<li>åœ¨<code>getFemaleUser()</code>ä¸­ï¼Œæˆ‘ä½¿ç”¨ ajax æŠ€è¡“å‘ API è«‹æ±‚è³‡æ–™ï¼Œä½†æ˜¯ï¼Œã€Œæ•´ç†å–å¾—çš„è³‡æ–™ã€é€™å€‹ task æœƒåœç•™åœ¨ callback queue ä¸­</li>
<li>è€Œåœ¨ stack æ²’æœ‰æ¸…ç©ºå‰ï¼Œcallback queue æ˜¯ä¸æœƒè¢«æ¨åˆ° stack è¢«åŸ·è¡Œçš„</li>
<li>stack å› ç‚º while loop çš„æ¢ä»¶ä¸€ç›´ç‚º trueï¼ˆæ•´ç†è³‡æ–™çš„ task æ²’æœ‰è¢«åŸ·è¡Œçš„è©±ï¼Œuser array çš„é•·åº¦æ˜¯ä¸æœƒæ”¹è®Šçš„ï¼‰ï¼Œæ‰€ä»¥ while loop æœƒä¸€ç›´è¢«åŸ·è¡Œä¸‹å»</li>
<li>åœ¨ç¨‹å¼ç¢¼åŠ ä¸Š<code>console.log()</code>è§€å¯Ÿå¯¦éš›è¢«åŸ·è¡Œçš„å…§å®¹ï¼Œå¯ä»¥å¾ˆæ˜é¡¯çœ‹å‡º<code>axios.get()</code>ä»¥å…§çš„ç¨‹å¼ç¢¼æ ¹æœ¬æ²’æœ‰è¢«åŸ·è¡Œ
<script src="https://gist.github.com/tzynwang/b0f95a819bf495c771c321cfaa4ecf8e.js"></script>
<img src="/2021/while-loop-ajax/ajax.png" alt="å› ç‚ºstackè£¡é¢çš„ä»»å‹™æ²’æœ‰æ¸…ç©ºï¼Œcallback queueè£¡é¢çš„taskæ°¸é ä¸æœƒè¢«åŸ·è¡Œ"></li>
</ul>
</li>
</ul>
<h2 id="çµè«–">çµè«–</h2>
<ul>
<li>æˆ‘çš„ while loop æ¢ä»¶æ˜¯æ ¹æ“š callback queue task ä¾†æ±ºå®šçš„ï¼Œä½†æˆ‘è®“ callback queue ä¸­çš„ task æ°¸é æ²’æœ‰æ©Ÿæœƒè¢«åŸ·è¡Œ</li>
<li>è€Œ JavaScript çš„ single thread ç‰¹æ€§æœƒè®“å®ƒä¸åœåœ°åŸ·è¡Œ stack å…§çš„ä»»å‹™ï¼Œç›´åˆ° stack æ¸…ç©ºä¹‹å‰ JavaScript ä¸æœƒè™•ç†å…¶ä»–äº‹æƒ…ï¼Œæ‰€ä»¥åˆ†é ç•«é¢å‡çµäº†ï¼ŒJavaScript ä¹Ÿæ°¸é å¡åœ¨ while loop è£¡é¢</li>
<li>Jake Archibald çš„æ¼”è¬›åœ¨æåˆ° Render steps æ™‚æä¾›äº†ç›¸é—œèªªæ˜ï¼Œç´„ 8:55 é–‹å§‹ï¼š</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cCOL7MC4Pl0?start=535" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="æ­¤å•é¡Œçš„è§£æ±ºæ–¹å¼">æ­¤å•é¡Œçš„è§£æ±ºæ–¹å¼</h2>
<ul>
<li>ç›´æ¥æ ¹æ“š<a href="https://randomuser.me/documentation#gender">RANDOM USER GENERATOR çš„èªªæ˜æ–‡ä»¶</a>ï¼Œåœ¨è«‹æ±‚çš„ URL åŠ ä¸Šç‰¹å®š parameter éæ¿¾éœ€æ±‚è³‡æ–™ï¼ˆå¥³æ€§ã€ä¸‰ä½ï¼š<code>?gender=female&#x26;results=3</code>ï¼‰</li>
<li>é€é recursive è®“<code>getFemaleUser()</code>åœ¨æ¢ä»¶æ²’æœ‰è¢«æ»¿è¶³çš„æƒ…æ³ä¸‹å†åº¦å‘¼å«<code>getFemaleUser()</code></li>
</ul>
<h2 id="è£œå……">è£œå……</h2>
<script src="https://gist.github.com/tzynwang/1cf59700311f401a74042df5c76cf47f.js"></script>
<p><img src="/2021/while-loop-ajax/setTimeout.png" alt="å› ç‚ºstackè£¡é¢çš„ä»»å‹™æ²’æœ‰æ¸…ç©ºï¼Œcallback queueè£¡é¢çš„taskæ°¸é ä¸æœƒè¢«åŸ·è¡Œ"></p>
<ul>
<li>å°‡<code>axios.get()</code>æŠ½æ›ç‚º<code>setTimeout()</code>ä¹Ÿæœƒé€ æˆé é¢å‡çµï¼ŒåŸç†èˆ‡ä¸Šè¿°ä¸€è‡´</li>
<li><code>setTimeout()</code>çš„ callback functionï¼ˆ<code>arr.push("add item to array");</code>ï¼‰è¢«æ¨åˆ° callback queue ä¹‹å¾Œï¼Œ<code>arr.push</code>ç­‰å¾… stack è¢«æ¸…ç©ºï¼Œä½†èƒ½è®“ while loop åœä¸‹ä¾†çš„ task æœ¬èº«å°±åœ¨ callback queue ä¸­è¢« stack æ°¸é ä¸æœƒçµæŸçš„ task å¡ä½ï¼Œå› æ­¤ while loop æ°¸é ä¸æœƒåœä¸‹ä¾†
<img src="/2021/while-loop-ajax/%E4%B8%8D%E8%A6%81%E5%81%9C%E4%B8%8B%E4%BE%86.jpg" alt="meme"></li>
</ul>
<h2 id="åƒè€ƒæ–‡ä»¶">åƒè€ƒæ–‡ä»¶</h2>
<ul>
<li><a href="https://youtu.be/8aGhZQkoFbQ">What the heck is the event loop anyway? | Philip Roberts</a></li>
<li><a href="https://youtu.be/cCOL7MC4Pl0">Jake Archibald: In The Loop</a></li>
<li><a href="https://youtu.be/u1kqx6AenYw">Further Adventures of the Event Loop - Erin Zimmer</a></li>
<li><a href="https://pjchender.blogspot.com/2017/08/javascript-learn-event-loop-stack-queue.html">[ç­†è¨˜] ç†è§£ JavaScript ä¸­çš„äº‹ä»¶å¾ªç’°ã€å †ç–Šã€ä½‡åˆ—å’Œä½µç™¼æ¨¡å¼ï¼ˆLearn event loop, stack, queue, and concurrency mode of JavaScript in depthï¼‰</a>ï¼šé€™ç¯‡æ–‡ç« å…§çš„å½±ç‰‡å…¨éƒ¨éƒ½æ˜¯ Philip Roberts çš„æ¼”è¬›å…§å®¹ï¼Œå½±ç‰‡éƒ¨åˆ†ç›´æ¥è§€çœ‹ Philip Roberts æœ¬äººçš„æ¼”è¬›éŒ„å½±å³å¯</li>
</ul>
  </div>

      <footer class="astro-QLGQ3ONJ">Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan</footer>
    </section>
  </body></html>