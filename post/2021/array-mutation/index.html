<!DOCTYPE html>
<html lang="en" class="astro-D4ZPMAD2">
  <head>
    <!-- Global Metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="sitemap" href="/sitemap-index.xml">
    <meta name="generator" content="Astro v2.10.12">

    <!-- Primary Meta Tags -->
    <title>ç‚ºä»€éº¼å¯ä»¥ä¿®æ”¹ä½¿ç”¨constå®£å‘Šçš„é™£åˆ—ï¼ˆæˆ–ç‰©ä»¶ï¼‰çš„å…§å®¹ï¼Ÿ</title>
    <meta name="title" content="ç‚ºä»€éº¼å¯ä»¥ä¿®æ”¹ä½¿ç”¨constå®£å‘Šçš„é™£åˆ—ï¼ˆæˆ–ç‰©ä»¶ï¼‰çš„å…§å®¹ï¼Ÿ">
    <meta name="description" content="">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tzynwang.github.io/post/2021/array-mutation/">
    <meta property="og:title" content="ç‚ºä»€éº¼å¯ä»¥ä¿®æ”¹ä½¿ç”¨constå®£å‘Šçš„é™£åˆ—ï¼ˆæˆ–ç‰©ä»¶ï¼‰çš„å…§å®¹ï¼Ÿ">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tzynwang.github.io/post/2021/array-mutation/">
    <meta property="twitter:title" content="ç‚ºä»€éº¼å¯ä»¥ä¿®æ”¹ä½¿ç”¨constå®£å‘Šçš„é™£åˆ—ï¼ˆæˆ–ç‰©ä»¶ï¼‰çš„å…§å®¹ï¼Ÿ">
    <meta property="twitter:description" content="">
    <meta property="twitter:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/_astro/index.5f60e57f.css" />
<link rel="stylesheet" href="/_astro/2-1-movie-list-i18n-note.5f900e92.css" /></head>
  <body class="astro-D4ZPMAD2">
    <section class="side-contnet astro-D4ZPMAD2">
      <h1 class="astro-D4ZPMAD2">æ™®é€šæ–‡çµ„ 2.0</h1>
      <nav class="astro-D4ZPMAD2">
        <a href="/" class="astro-D4ZPMAD2">é¦–é </a>
        <a href="/archive" class="astro-D4ZPMAD2">å…¨æ–‡ç« æ­¸æª”</a>
      </nav>
    </section>
    <section class="main-content astro-D4ZPMAD2">
      
  <div class="post-container astro-QTOKGA5Y">
    <h1 class="astro-QTOKGA5Y">ç‚ºä»€éº¼å¯ä»¥ä¿®æ”¹ä½¿ç”¨constå®£å‘Šçš„é™£åˆ—ï¼ˆæˆ–ç‰©ä»¶ï¼‰çš„å…§å®¹ï¼Ÿ</h1>
    <div class="info astro-QTOKGA5Y">
      <span class="astro-QTOKGA5Y">2021-04-09 14:23</span>
      <span class="astro-QTOKGA5Y"><span class="astro-2IYMVI75">
  JavaScript
</span></span>
      <ul class="astro-QTOKGA5Y">
        <li class="toc-2 astro-QTOKGA5Y">
              <a href="#åŸå§‹å•é¡Œ" class="astro-QTOKGA5Y">åŸå§‹å•é¡Œ</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç°¡ç­”" class="astro-QTOKGA5Y">ç°¡ç­”</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç’°å¢ƒ" class="astro-QTOKGA5Y">ç’°å¢ƒ</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#é—œæ–¼constçš„äº‹å¯¦" class="astro-QTOKGA5Y">é—œæ–¼constçš„äº‹å¯¦</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#you-dont-know-js-yet-ç›¸é—œç­†è¨˜" class="astro-QTOKGA5Y">You Donâ€™t Know JS Yet ç›¸é—œç­†è¨˜</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#es2015-const-is-not-about-immutability-ç›¸é—œç­†è¨˜" class="astro-QTOKGA5Y">ES2015 const is not about immutability ç›¸é—œç­†è¨˜</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#mdn-ä¸Šçš„ç›¸é—œå…§å®¹" class="astro-QTOKGA5Y">MDN ä¸Šçš„ç›¸é—œå…§å®¹</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#objectfreeze" class="astro-QTOKGA5Y">Object.freeze()</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#objectseal" class="astro-QTOKGA5Y">Object.seal()</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#objectpreventextensions" class="astro-QTOKGA5Y">Object.preventExtensions()</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#objectgetownpropertydescriptor" class="astro-QTOKGA5Y">Object.getOwnPropertyDescriptor()</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#è£œå……ç„¡æ³•è§£å‡æˆ–å†é–‹å°" class="astro-QTOKGA5Y">è£œå……ï¼šç„¡æ³•è§£å‡æˆ–å†é–‹å°</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#åƒè€ƒæ–‡ä»¶" class="astro-QTOKGA5Y">åƒè€ƒæ–‡ä»¶</a>
            </li>
      </ul>
    </div>
    <h2 id="åŸå§‹å•é¡Œ">åŸå§‹å•é¡Œ</h2>
<p>ä»¥<code>const</code>å®£å‘Šä¸€å€‹é™£åˆ—ï¼ˆæˆ–ç‰©ä»¶ï¼‰ï¼Œç‚ºä½•å¯ä»¥åœ¨å®£å‘Šå®Œç•¢å¾Œç¹¼çºŒä¿®æ”¹è©²é™£åˆ—ï¼ˆæˆ–ç‰©ä»¶ï¼‰çš„å…§å®¹ï¼Ÿ</p>
<p><img src="/2021/array-mutation/%E9%A8%8E%E5%A3%AB%E7%8E%8B%E7%9A%84%E6%8F%90%E5%95%8F%E6%99%82%E9%96%93.jpg" alt="äº‹å¯¦ä¸Šconstçš„é™åˆ¶æ˜¯ã€Œè®Šæ•¸ä¸èƒ½è¢«re-assignedæˆ–re-declaredã€"></p>
<h2 id="ç°¡ç­”">ç°¡ç­”</h2>
<p><code>const</code>çš„é™åˆ¶æ˜¯ã€Œåªèƒ½è³¦å€¼ä¸€æ¬¡ï¼Œä¸èƒ½é‡æ–°è³¦å€¼ã€ï¼Œä¸ç›´æ¥ç­‰åŒã€Œä¸èƒ½ä¿®æ”¹å…§å®¹ã€ã€‚</p>
<h2 id="ç’°å¢ƒ">ç’°å¢ƒ</h2>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #e1e4e8">Google Chrome: 89.0.4389.114 (Official Build) (64-bit)</span></span>
<span class="line"><span style="color: #e1e4e8">os: Windows_NT 10.0.18363 win32 x64</span></span></code></pre>
<h2 id="é—œæ–¼constçš„äº‹å¯¦">é—œæ–¼<code>const</code>çš„äº‹å¯¦</h2>
<h3 id="you-dont-know-js-yet-ç›¸é—œç­†è¨˜">You Donâ€™t Know JS Yet ç›¸é—œç­†è¨˜</h3>
<ul>
<li>
<p><code>const</code>Â declared variables are not â€œunchangeableâ€, they just cannot be re-assigned.</p>
<ul>
<li>ä¸é©åˆä»¥ã€Œä¸èƒ½è¢«ä¿®æ”¹ã€ä¾†ç†è§£é€é<code>const</code>å®£å‘Šçš„è®Šæ•¸ï¼Œè€Œæ˜¯ã€Œä½¿ç”¨<code>const</code>å®£å‘Šçš„è®Šæ•¸åªèƒ½è¢«è³¦å€¼ä¸€æ¬¡ã€</li>
</ul>
<script src="https://gist.github.com/tzynwang/bf4ef105981d115a11ae4eb761e34ac8.js"></script>
</li>
<li>
<p>Itâ€™s ill-advised to useÂ <code>const</code>Â with object values, because those values can still be changed even though the variable canâ€™t be re-assigned.</p>
</li>
</ul>
<script src="https://gist.github.com/tzynwang/b7f3ee4e1e7c8936a98bb8f7fa76b634.js"></script>
<ul>
<li>If you stick to using <code>const</code> only with primitive values, you avoid any confusion of re-assignment (not allowed) vs. mutation (allowed)! Thatâ€™s the safest and best way to use const.</li>
</ul>
<h3 id="es2015-const-is-not-about-immutability-ç›¸é—œç­†è¨˜">ES2015 const is not about immutability ç›¸é—œç­†è¨˜</h3>
<script src="https://gist.github.com/tzynwang/0945c27501de984d3aaa410bf55a08ce.js"></script>
<ul>
<li>The only thing thatâ€™s immutable here is the binding. <code>const</code> assigns a value (<code>{}</code>) to a variable name (<code>foo</code>), and guarantees that no rebinding will happen. ES2015 const has nothing to do with immutability of values.</li>
<li>èˆ‡å…¶æè¿°ç‚ºã€Œé€é<code>const</code>å®£å‘Šçš„é™£åˆ—ï¼ˆæˆ–ç‰©ä»¶ï¼‰ä¸èƒ½è¢«ä¿®æ”¹å…§å®¹ã€ï¼Œä¸å¦‚å°‡<code>const</code>ç†è§£ç‚ºã€Œå»ºç«‹ä¸€å€‹è®Šæ•¸èˆ‡å€¼ä¹‹é–“ä¸è®Šçš„ bindingã€ã€‚</li>
</ul>
<h3 id="mdn-ä¸Šçš„ç›¸é—œå…§å®¹">MDN ä¸Šçš„ç›¸é—œå…§å®¹</h3>
<ul>
<li>The value of a constant canâ€™t be changed through reassignment, and it canâ€™t be re-declared.</li>
<li>ä»¥<code>const</code>å®£å‘Šè®Šæ•¸çš„åŒæ™‚å°±å¾—è³¦å€¼
<script src="https://gist.github.com/tzynwang/b92649f9945fb3cb92275cf448adb199.js"></script>
</li>
</ul>
<h2 id="objectfreeze"><code>Object.freeze()</code></h2>
<ul>
<li>å¦‚æœæƒ³è¦ç¢ºä¿é™£åˆ—æˆ–ç‰©ä»¶å…§å®¹ä¸è¢«ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨<code>Object.freeze()</code>
<ul>
<li>MDN: Use <code>Object.freeze()</code> to make object immutable. A frozen object can no longer be changed; freezing an object prevents new properties from being added to it, existing properties from being removed, prevents changing the enumerability, configurability, or writability of existing properties, and prevents the values of existing properties from being changed.</li>
<li>ä¸€å€‹é™£åˆ—æˆ–ç‰©ä»¶è¢«å‡çµå¾Œï¼Œç„¡æ³•æ–°å¢æˆ–ç§»é™¤è©²é™£åˆ—ã€ç‰©ä»¶çš„å…§å®¹ï¼Œä¹Ÿä¸å¯ä¿®æ”¹è©²é™£åˆ—ã€ç‰©ä»¶çš„ properties</li>
</ul>
</li>
<li><code>Object.freeze()</code>ä¸æœƒè‡ªå‹•å¥—ç”¨åˆ°å·¢ç‹€çµæ§‹å…§çš„æ‰€æœ‰å…§å®¹ä¸Šï¼Œå¦‚ä»¥ä¸‹ç¯„ä¾‹ï¼š
<script src="https://gist.github.com/tzynwang/a52efc027532899027d7d0e0c9f1cfef.js"></script>
<img src="/2021/array-mutation/object-freeze-demo-1.png" alt="Object.freeze() demo 1"></li>
<li>å¯é€ééè¿´ä¾†å‡çµå·¢ç‹€çµæ§‹ç‰©ä»¶çš„å…§å®¹
<script src="https://gist.github.com/tzynwang/e7a3cf50d030d90f05eee59257806b1e.js"></script>
<img src="/2021/array-mutation/object-freeze-demo-2.png" alt="Object.freeze() demo 2"></li>
</ul>
<h2 id="objectseal"><code>Object.seal()</code></h2>
<ul>
<li>The Object.seal() method seals an object, preventing new properties from being added to it and marking all existing properties as non-configurable. Values of present properties can still be changed as long as they are writable.
<ul>
<li>èˆ‡<code>Object.freeze()</code>çš„å·®ç•°æ˜¯ï¼Œç¶“<code>Object.seal()</code>å°é–‰çš„ç‰©ä»¶ï¼Œä¸èƒ½å°å…¶æ–°å¢æˆ–åˆªé™¤å…§å®¹ï¼Œä½†å°é–‰å‰å°±å­˜åœ¨çš„å…§å®¹å¯ä»¥è¢«ä¿®æ”¹
<script src="https://gist.github.com/tzynwang/1e8917a16a8450fb76fd5a6bd34201e9.js"></script>
<img src="/2021/array-mutation/object-freeze-demo-3.png" alt="Object.freeze() demo 3"></li>
</ul>
</li>
</ul>
<h2 id="objectpreventextensions"><code>Object.preventExtensions()</code></h2>
<p><code>Object.preventExtensions()</code>åªæœƒç¦æ­¢å°ç‰©ä»¶æ–°å¢å…§å®¹ï¼Œä½†å¯ä»¥åˆªé™¤æˆ–ä¿®æ”¹æ—¢æœ‰å…§å®¹</p>
<script src="https://gist.github.com/tzynwang/034ffb5ed714a851cc2e35c5b8a148df.js"></script>
<p><img src="/2021/array-mutation/object-freeze-demo-4.png" alt="Object.freeze() demo 4"></p>
<h2 id="objectgetownpropertydescriptor"><code>Object.getOwnPropertyDescriptor()</code></h2>
<p>å›å‚³ä¸€ç‰©ä»¶ä¸­æŸå…§å®¹çš„ç›¸é—œè¨­å®š</p>
<script src="https://gist.github.com/tzynwang/e0618d9ef2d4fa0b153ad6d9347ae8ee.js"></script>
<p><img src="/2021/array-mutation/object-freeze-demo-5.png" alt="Object.freeze() demo 5"></p>
<p>åƒè€ƒ<a href="https://tc39.es/ecma262/#table-data-property-attributes">ECMAScript Specification, Table 3: Attributes of a Data Property</a>ï¼š</p>
<ul>
<li><code>writable</code>: If false, attempts by ECMAScript code to change the propertyâ€™s [[Value]] attribute using [[Set]] will not succeed.
<ul>
<li><code>writable</code>è‹¥ç‚º<code>false</code>ï¼Œä»£è¡¨è©²<code>value</code>ç„¡æ³•è¢«ä¿®æ”¹</li>
<li>è¢«<code>Object.freeze()</code>å‡çµçš„ç‰©ä»¶ï¼Œå…¶<code>value</code>çš„<code>writable</code>å°±è¢«ä¿®æ”¹ç‚º<code>false</code></li>
</ul>
</li>
<li><code>enumerable</code>: If true, the property will be enumerated by a for-in enumeration. Otherwise, the property is said to be non-enumerable.
<ul>
<li><code>enumerable</code>ç‚º<code>true</code>ä»£è¡¨è©²<code>value</code>æœƒ<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in">è¢«<code>for...in</code>éæ­·</a></li>
</ul>
</li>
<li><code>configurable</code>: If false, attempts to delete the property, change the property to be an accessor property, or change its attributes (other than <code>[[Value]]</code>, or changing <code>[[Writable]]</code> to false) will fail.
<ul>
<li><code>configurable</code>è‹¥ç‚º<code>false</code>ï¼Œä»£è¡¨è©²<code>value</code>ç„¡æ³•è¢«åˆªé™¤</li>
<li>ç¶“<code>Object.freeze()</code>æˆ–<code>Object.seal()</code>è™•ç†éçš„ç‰©ä»¶ï¼Œå…¶<code>value</code>çš„<code>configurable</code>å°±è¢«ä¿®æ”¹ç‚º<code>false</code>
<img src="/2021/array-mutation/attributes-of-data-property.png" alt="attributes of data property"></li>
</ul>
</li>
</ul>
<h2 id="è£œå……ç„¡æ³•è§£å‡æˆ–å†é–‹å°">è£œå……ï¼šç„¡æ³•è§£å‡æˆ–å†é–‹å°</h2>
<p><a href="https://stackoverflow.com/questions/19293321/opposite-of-object-freeze-or-object-seal-in-javascript">Opposite of Object.freeze or Object.seal in JavaScript</a></p>
<blockquote>
<p>Freezing an object is the ultimate form of lock-down. Once an object has been frozen it cannot be unfrozen â€“ nor can it be tampered in any manner. This is the best way to make sure that your objects will stay exactly as you left them, indefinitely</p>
</blockquote>
<ul>
<li><code>Object.freeze()</code>èˆ‡<code>Object.seal()</code>æ˜¯ä¸å¯é€†çš„ç¨‹åºï¼Œä¸€æ—¦ä¸€å€‹ç‰©ä»¶ï¼ˆæˆ–é™£åˆ—ï¼‰è¢«å‡çµæˆ–å°é–‰ï¼Œè©²ç‰©ä»¶å°±ç„¡æ³•å›åˆ°å‡çµï¼ˆæˆ–å°é–‰ï¼‰å‰çš„ç‹€æ…‹</li>
<li>å¯ä»¥é€é<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign"><code>Object.assign()</code></a>ä¾†è£½ä½œè©²ç‰©ä»¶ï¼ˆæˆ–é™£åˆ—ï¼‰çš„å‰¯æœ¬ï¼Œå†ä¿®æ”¹å…¶å…§å®¹</li>
</ul>
<h2 id="åƒè€ƒæ–‡ä»¶">åƒè€ƒæ–‡ä»¶</h2>
<ul>
<li>You Donâ€™t Know JS Yet: Get Started - 2nd Edition
<ul>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/get-started/ch2.md">Chapter 2: Surveying JS</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/get-started/apA.md">Appendix A: Exploring Further</a></li>
</ul>
</li>
<li><a href="https://mathiasbynens.be/notes/es6-const">ES2015 const is not about immutability</a></li>
<li>MDN
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const">const</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze">Object.freeze()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/seal">Object.seal()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions">Object.preventExtensions()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor">Object.getOwnPropertyDescriptor()</a></li>
</ul>
</li>
<li><a href="https://stackoverflow.com/questions/7509894/freezing-arrays-in-javascript">â€˜Freezingâ€™ Arrays in Javascript?</a></li>
</ul>
  </div>

      <footer class="astro-QLGQ3ONJ">Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan</footer>
    </section>
  </body></html>