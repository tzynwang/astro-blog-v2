<!DOCTYPE html>
<html lang="en" class="astro-D4ZPMAD2">
  <head>
    <!-- Global Metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="sitemap" href="/sitemap-index.xml">
    <meta name="generator" content="Astro v2.10.12">

    <!-- Primary Meta Tags -->
    <title>2022 ç¬¬25é€± å­¸ç¿’ç­†è¨˜ï¼šåœ¨ React App ä¸­å°æ‡‰ race condition</title>
    <meta name="title" content="2022 ç¬¬25é€± å­¸ç¿’ç­†è¨˜ï¼šåœ¨ React App ä¸­å°æ‡‰ race condition">
    <meta name="description" content="">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tzynwang.github.io/post/2022/react-race-condition-AbortController/">
    <meta property="og:title" content="2022 ç¬¬25é€± å­¸ç¿’ç­†è¨˜ï¼šåœ¨ React App ä¸­å°æ‡‰ race condition">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tzynwang.github.io/post/2022/react-race-condition-AbortController/">
    <meta property="twitter:title" content="2022 ç¬¬25é€± å­¸ç¿’ç­†è¨˜ï¼šåœ¨ React App ä¸­å°æ‡‰ race condition">
    <meta property="twitter:description" content="">
    <meta property="twitter:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/_astro/index.5f60e57f.css" />
<link rel="stylesheet" href="/_astro/2-1-movie-list-i18n-note.5f900e92.css" /></head>
  <body class="astro-D4ZPMAD2">
    <section class="side-contnet astro-D4ZPMAD2">
      <h1 class="astro-D4ZPMAD2">æ™®é€šæ–‡çµ„ 2.0</h1>
      <nav class="astro-D4ZPMAD2">
        <a href="/" class="astro-D4ZPMAD2">é¦–é </a>
        <a href="/archive" class="astro-D4ZPMAD2">å…¨æ–‡ç« æ­¸æª”</a>
      </nav>
    </section>
    <section class="main-content astro-D4ZPMAD2">
      
  <div class="post-container astro-QTOKGA5Y">
    <h1 class="astro-QTOKGA5Y">2022 ç¬¬25é€± å­¸ç¿’ç­†è¨˜ï¼šåœ¨ React App ä¸­å°æ‡‰ race condition</h1>
    <div class="info astro-QTOKGA5Y">
      <span class="astro-QTOKGA5Y">2022-06-25 12:01</span>
      <span class="astro-QTOKGA5Y"><span class="astro-2IYMVI75">
  React
</span></span>
      <ul class="astro-QTOKGA5Y">
        <li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç¸½çµ" class="astro-QTOKGA5Y">ç¸½çµ</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç­†è¨˜" class="astro-QTOKGA5Y">ç­†è¨˜</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#æƒ…å¢ƒæè¿°" class="astro-QTOKGA5Y">æƒ…å¢ƒæè¿°</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#è§£æ³•" class="astro-QTOKGA5Y">è§£æ³•</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#é—œæ–¼-race-condition" class="astro-QTOKGA5Y">é—œæ–¼ race condition</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#åƒè€ƒæ–‡ä»¶" class="astro-QTOKGA5Y">åƒè€ƒæ–‡ä»¶</a>
            </li>
      </ul>
    </div>
    <h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>æœ€è¿‘æ’åˆ° race condition çš„å‘ï¼Œè¨˜éŒ„ä¸€ä¸‹åœ¨ä½¿ç”¨ react æ­é… axios é–‹ç™¼æ™‚å¯ä»¥æ€éº¼è§£æ±º</p>
<h2 id="ç­†è¨˜">ç­†è¨˜</h2>
<h3 id="æƒ…å¢ƒæè¿°">æƒ…å¢ƒæè¿°</h3>
<ul>
<li>å‰ç«¯æ ¹æ“š url ä¸­çš„ <code>contendId_X</code> å‘å¾Œç«¯ç´¢å–å°æ‡‰è³‡æ–™ï¼ˆ <code>contendId_X</code> å°æ‡‰çš„è³‡æ–™é‡ç›¸å°é¾å¤§ï¼Œå¾Œç«¯ç„¡æ³•é¦¬ä¸Šå›æ‡‰ï¼‰ï¼›ä½†åœ¨å¾Œç«¯å›å‚³å°æ‡‰å…§å®¹å‰ï¼Œä½¿ç”¨è€…å°±é›¢é–‹äº†è©²ç•«é¢</li>
<li>ä½¿ç”¨è€…é€²å…¥äº†å¦ä¸€å€‹ç•«é¢ï¼Œå‰ç«¯æ ¹æ“šæ–°çš„ <code>contentId_Y</code> å‘å¾Œç«¯ç´¢å–è³‡æ–™</li>
<li>å¾Œç«¯å…ˆå›å‚³äº† <code>contentId_Y</code> çš„è³‡æ–™ï¼Œéš¨å¾Œæ‰å›å‚³ <code>contendId_X</code> çš„çµæœï¼Œé€ æˆç•«é¢ä¸Šçš„å…§å®¹ä¸æ­£ç¢º</li>
</ul>
<h3 id="è§£æ³•">è§£æ³•</h3>
<ul>
<li>57 è¡Œï¼šé€²å…¥ç•«é¢æ™‚ï¼Œæ¯”å° url ä¸­çš„ <code>contentId</code> èˆ‡å¾Œç«¯å›å‚³çš„å…§å®¹çš„ <code>contentId</code> æ˜¯å¦ä¸€è‡´ï¼Œå…©é‚Šçš„ <code>contentId</code> ä¸åŒæ™‚ï¼Œå°±ä¸æ‡‰è©²æ›´æ–°ç”¨ä¾†ä¿å­˜è³‡æ–™çš„ states è®Šæ•¸</li>
<li>65 è¡Œï¼šç›£è½ url ç‹€æ…‹ï¼Œä¸€æ—¦ä½¿ç”¨è€…é¸æ“‡ç€è¦½åˆ°å…¶ä»– url ï¼Œå°±é€é <code>AbortController.abort()</code> å–æ¶ˆå·²ç¶“é€å‡ºçš„ request</li>
<li>66 è¡Œï¼šæ‰¿ä¸Šï¼Œä¸€æ—¦ä½¿ç”¨è€…é¸æ“‡ç€è¦½åˆ°å…¶ä»– url ï¼Œå°±å°‡ä¿å­˜è³‡æ–™ç”¨çš„ states è®Šæ•¸å›æ­¸åˆ°é è¨­ç‹€æ…‹ï¼Œé¿å…ä½¿ç”¨è€…åœ¨æ–°ç•«é¢çœ‹åˆ°èˆŠç•«é¢çš„è³‡æ–™</li>
<li>å®Œæ•´å…§å®¹å¯åƒè€ƒ <a href="https://github.com/tzynwang/react-deal-with-race-condition">tzynwang/react-deal-with-race-condition</a></li>
</ul>
<script src="https://gist.github.com/tzynwang/0488ab7b41d06d52f83afa7022c85905.js"></script>
<h3 id="é—œæ–¼-race-condition">é—œæ–¼ race condition</h3>
<blockquote>
<p>Wikipedia: A race condition (or race hazard) is the condition of an electronics, software, or other system where the systemâ€™s substantive behavior is dependent on the sequence or timing of other <strong>uncontrollable events</strong>. It becomes a bug when one or more of the possible behaviors is undesirable.</p>
</blockquote>
<blockquote>
<p>StackOverFlow: A race condition occurs when two or more threads can <strong>access shared data</strong> and they <strong>try to change it at the same time</strong>. Because the thread scheduling algorithm can swap between threads at any time, you donâ€™t know the order in which the threads will attempt to access the shared data. Therefore, the result of the change in data is dependent on the thread scheduling algorithm, i.e. both threads are â€œracingâ€ to access/change the data.</p>
</blockquote>
<ul>
<li>è§£é‡‹ï¼ˆæ¯”å–»ï¼‰ï¼š
<ul>
<li>å†°ç®±è£¡çš„ç‰›å¥¶æ²’äº†ï¼Œä½ å…ˆç™¼ç¾é€™ä»¶äº‹ï¼Œå‡ºé–€æº–å‚™è²·ä¸€ç“¶é®®å¥¶ï¼›æ¥è‘—ä½ å®¤å‹ä¹Ÿçœ‹åˆ°å†°ç®±è£¡æ²’æœ‰é®®å¥¶äº†ï¼Œæ–¼æ˜¯ä»–ä¹Ÿå‡ºé–€æº–å‚™è²·ä¸€ç“¶ï¼›æœ€å¾Œå†°ç®±è£¡æœ‰å…©ç“¶é®®å¥¶ã€‚</li>
<li>å…¶å¯¦åªéœ€è¦è£œä¸€ç“¶é®®å¥¶åˆ°å†°ç®±å°±å¥½ï¼Œå¯æ˜¯ä½ è·Ÿä½ çš„å®¤å‹éƒ½è§€æ¸¬åˆ°ã€Œå†°ç®±æ²’æœ‰é®®å¥¶ã€é€™å€‹äº‹ä»¶ï¼Œä¸”å…©å€‹äººéƒ½å‡ºç™¼å»è²·é®®å¥¶ã€‚</li>
</ul>
</li>
<li>è§£æ±ºè¾¦æ³•ï¼ˆæ¯”å–»ï¼‰ï¼š
<ul>
<li>ä»»ä½•ç™¼ç¾å†°ç®±æ²’æœ‰ç‰›å¥¶çš„äººï¼Œéƒ½å…ˆæŠŠå†°ç®±æ•´å€‹é–èµ·ä¾†ï¼ˆcritical sectionï¼‰ï¼Œç­‰åˆ°è²·å¥½é®®å¥¶å›å®¶å¾Œï¼Œå†è§£é–‹å†°ç®±çš„é–ï¼ŒæŠŠç‰›å¥¶æ”¾é€²å»ï¼›é€™æ¨£å°±ä¸æœƒæœ‰ã€Œæ„å¤–å¤šè²·ä¸€ç“¶é®®å¥¶ã€çš„å•é¡Œç™¼ç”Ÿäº†ã€‚</li>
<li>critical section (by Wikipedia): In concurrent programming, concurrent accesses to shared resources can lead to unexpected or erroneous behavior, so parts of the program where the shared resource is accessed need to be protected in ways that avoid the concurrent access. One way to do so is known as a critical section or critical region. This protected section <strong>cannot be entered by more than one process or thread at a time</strong>; others are suspended until the first leaves the critical section.</li>
</ul>
</li>
</ul>
<h2 id="åƒè€ƒæ–‡ä»¶">åƒè€ƒæ–‡ä»¶</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Race_condition">Wikipedia: Race condition</a></li>
<li><a href="https://stackoverflow.com/questions/34510/what-is-a-race-condition">StackOverFlow: What is a race condition?</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController">MDN: AbortController</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal">MDN: AbortSignal</a></li>
<li><a href="https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect#fixing-the-useeffect-race-condition=">Fixing Race Conditions in React with useEffect</a></li>
<li><a href="https://youtu.be/MqnpIwN7dz0">YouTube: Race Conditions and How to Prevent Them - A Look at Dekkerâ€™s Algorithm</a></li>
</ul>
  </div>

      <footer class="astro-QLGQ3ONJ">Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan</footer>
    </section>
  </body></html>