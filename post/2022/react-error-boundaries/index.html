<!DOCTYPE html>
<html lang="en" class="astro-D4ZPMAD2">
  <head>
    <!-- Global Metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="sitemap" href="/sitemap-index.xml">
    <meta name="generator" content="Astro v2.10.12">

    <!-- Primary Meta Tags -->
    <title>ã€ŒReact Error Boundariesã€å¯¦ä½œç­†è¨˜</title>
    <meta name="title" content="ã€ŒReact Error Boundariesã€å¯¦ä½œç­†è¨˜">
    <meta name="description" content="">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tzynwang.github.io/post/2022/react-error-boundaries/">
    <meta property="og:title" content="ã€ŒReact Error Boundariesã€å¯¦ä½œç­†è¨˜">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tzynwang.github.io/post/2022/react-error-boundaries/">
    <meta property="twitter:title" content="ã€ŒReact Error Boundariesã€å¯¦ä½œç­†è¨˜">
    <meta property="twitter:description" content="">
    <meta property="twitter:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/_astro/index.5f60e57f.css" />
<link rel="stylesheet" href="/_astro/2-1-movie-list-i18n-note.5f900e92.css" /></head>
  <body class="astro-D4ZPMAD2">
    <section class="side-contnet astro-D4ZPMAD2">
      <h1 class="astro-D4ZPMAD2">æ™®é€šæ–‡çµ„ 2.0</h1>
      <nav class="astro-D4ZPMAD2">
        <a href="/" class="astro-D4ZPMAD2">é¦–é </a>
        <a href="/archive" class="astro-D4ZPMAD2">å…¨æ–‡ç« æ­¸æª”</a>
      </nav>
    </section>
    <section class="main-content astro-D4ZPMAD2">
      
  <div class="post-container astro-QTOKGA5Y">
    <h1 class="astro-QTOKGA5Y">ã€ŒReact Error Boundariesã€å¯¦ä½œç­†è¨˜</h1>
    <div class="info astro-QTOKGA5Y">
      <span class="astro-QTOKGA5Y">2022-01-29 22:17</span>
      <span class="astro-QTOKGA5Y"><span class="astro-2IYMVI75">
  React
</span></span>
      <ul class="astro-QTOKGA5Y">
        <li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç¸½çµ" class="astro-QTOKGA5Y">ç¸½çµ</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç­†è¨˜" class="astro-QTOKGA5Y">ç­†è¨˜</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#error-boundary-å…ƒä»¶çš„ç‰¹å¾µ" class="astro-QTOKGA5Y">Error Boundary å…ƒä»¶çš„ç‰¹å¾µ</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#static-getderivedstatefromerrorerror" class="astro-QTOKGA5Y">static getDerivedStateFromError(error)</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#componentdidcatcherror-info" class="astro-QTOKGA5Y">componentDidCatch(error, info)</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#ç¨‹å¼ç¢¼" class="astro-QTOKGA5Y">ç¨‹å¼ç¢¼</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#åƒè€ƒæ–‡ä»¶" class="astro-QTOKGA5Y">åƒè€ƒæ–‡ä»¶</a>
            </li>
      </ul>
    </div>
    <h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>ä½¿ç”¨ Error Boundary å…ƒä»¶æ•æ‰ React App å…§å‡ºç¾çš„éŒ¯èª¤
æœ¬æ¬¡å¯¦ä½œåƒè€ƒ React å®˜æ–¹æ–‡ä»¶ï¼Œä½¿ç”¨ Error Boundary å…ƒä»¶åŒ…è¦† layout ä¸­çš„å„å€‹å€å¡Šï¼Œå³ä½¿å€‹åˆ¥å€å¡Šå‡ºéŒ¯ä¹Ÿä¸æœƒå°è‡´æ•´å€‹ App ç„¡æ³•é‹è¡Œï¼š<a href="https://tzynwang.github.io/react-error-boundary/">https://tzynwang.github.io/react-error-boundary/</a></p>
<p><img src="/2022/react-error-boundaries/screenshot.png" alt="error boundary"></p>
<h2 id="ç­†è¨˜">ç­†è¨˜</h2>
<blockquote>
<p>As of React 16, errors that were <strong>not caught by any error boundary</strong> will result in <strong>unmounting of the whole React component tree</strong>.</p>
</blockquote>
<p>éŒ¯èª¤è‹¥æ²’æœ‰è¢« Error Boundary å…ƒä»¶æ•æ‰ï¼Œæœƒå°è‡´æ•´å€‹ React App çš„æ›è¼‰è¡Œç‚ºè¢«å–æ¶ˆ</p>
<h3 id="error-boundary-å…ƒä»¶çš„ç‰¹å¾µ">Error Boundary å…ƒä»¶çš„ç‰¹å¾µ</h3>
<ul>
<li>A class component becomes an error boundary if it defines either (or both) of the lifecycle methods <code>static getDerivedStateFromError()</code> or <code>componentDidCatch()</code>. æ³¨æ„åªæœ‰ class component å¯ä»¥å¯¦ä½œ <code>static getDerivedStateFromError()</code> æˆ– <code>componentDidCatch()</code> é€™å…©ç¨® lifecycle methodï¼ˆå›  hooks å°šæœªæ”¯æ´ï¼‰ï¼Œæ•…ç›®å‰é‚„æ²’è¾¦æ³•é€é functional component ä¾†å¯¦ä½œ Error Boundary</li>
<li>Both lifecycle (<code>static getDerivedStateFromError()</code>, <code>componentDidCatch()</code>) are invoked after an error has been thrown by a descendant component.</li>
<li>Error boundaries do not catch errors for:
<ul>
<li>Event handlers: React doesnâ€™t need error boundaries to recover from errors in event handlers. Unlike the render method and lifecycle methods, the <strong>event handlers donâ€™t happen during rendering</strong>. So if they throw, <strong>React still knows what to display</strong> on the screen. å³ä½¿ Event handlers å‡ºç¾éŒ¯èª¤ï¼Œç•«é¢ä¹Ÿä¸å—å½±éŸ¿ï¼ˆReact ä¾èˆŠçŸ¥é“éœ€è¦æ¸²æŸ“ä»€éº¼å…§å®¹ï¼‰ï¼Œæ‰€ä»¥ä¸è¢« Error Boundary å…ƒä»¶æ•æ‰ä¹Ÿæ²’æœ‰é—œä¿‚</li>
<li>Asynchronous code (e.g. <code>setTimeout</code> or <code>requestAnimationFrame</code> callbacks)</li>
<li>Server side rendering</li>
<li><strong>Errors thrown in the error boundary itself</strong> (rather than its children)</li>
</ul>
</li>
</ul>
<h3 id="static-getderivedstatefromerrorerror">static getDerivedStateFromError(error)</h3>
<ul>
<li><code>static getDerivedStateFromError(error)</code> receives the error that was thrown as a parameter and should <strong>return a value to update state</strong>. å›å‚³çš„å€¼æœƒç›´æ¥è¢« <code>setState</code> æ‹¿å»æ›´æ–° <code>this.state</code></li>
<li><code>getDerivedStateFromError()</code> is called during the <strong>render phase</strong>, so <strong>side-effects are not permitted</strong>. For those use cases, use <code>componentDidCatch()</code> instead.</li>
</ul>
<h3 id="componentdidcatcherror-info">componentDidCatch(error, info)</h3>
<ul>
<li><code>componentDidCatch(error, info)</code> receives two parameters:
<ul>
<li>error: The error that was thrown.</li>
<li>info: An object with a componentStack key containing information about which component threw the error.</li>
</ul>
</li>
<li><code>componentDidCatch()</code> is called during the <strong>commit phase</strong>, so <strong>side-effects are permitted</strong>.</li>
<li>In the event of an error, you can render a fallback UI with <code>componentDidCatch()</code> by calling <code>setState</code>, but this will be deprecated in a future release. Use <code>static getDerivedStateFromError()</code> to handle fallback rendering instead.</li>
</ul>
<h3 id="ç¨‹å¼ç¢¼">ç¨‹å¼ç¢¼</h3>
<script src="https://gist.github.com/tzynwang/427f0181a0b6b1e749b0778457137286.js"></script>
<p>å®Œæ•´ï¼š<a href="https://github.com/tzynwang/react-error-boundary/tree/master/src/components">https://github.com/tzynwang/react-error-boundary/tree/master/src/components</a></p>
<h2 id="åƒè€ƒæ–‡ä»¶">åƒè€ƒæ–‡ä»¶</h2>
<ul>
<li><a href="https://reactjs.org/docs/error-boundaries.html">React: Error Boundaries</a></li>
<li><a href="https://github.com/facebook/react/blob/575791925697c7e23966e6934b577e69aef736f3/packages/react-devtools-shared/src/devtools/views/ErrorBoundary/ErrorBoundary.js">react/packages/react-devtools-shared/src/devtools/views/ErrorBoundary/ErrorBoundary.js</a></li>
<li><a href="https://stackoverflow.com/questions/52962851/whats-the-difference-between-getderivedstatefromerror-and-componentdidcatch">StackOverFlow: whatâ€™s the difference between getDerivedStateFromError and componentDidCatch</a></li>
<li><a href="https://stackoverflow.com/questions/59625425/understanding-error-capturestacktrace-and-stack-trace-persistance">StackOverFlow: Understanding Error.captureStackTrace and stack trace persistance?</a></li>
</ul>
  </div>

      <footer class="astro-QLGQ3ONJ">Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan</footer>
    </section>
  </body></html>