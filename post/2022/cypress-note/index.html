<!DOCTYPE html>
<html lang="en" class="astro-D4ZPMAD2">
  <head>
    <!-- Global Metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="sitemap" href="/sitemap-index.xml">
    <meta name="generator" content="Astro v2.10.12">

    <!-- Primary Meta Tags -->
    <title>2022 ç¬¬44é€± cypress ç¶œåˆç­†è¨˜ï¼šå°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒã€æ­é… typescript ä½¿ç”¨ dayjs</title>
    <meta name="title" content="2022 ç¬¬44é€± cypress ç¶œåˆç­†è¨˜ï¼šå°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒã€æ­é… typescript ä½¿ç”¨ dayjs">
    <meta name="description" content="">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tzynwang.github.io/post/2022/cypress-note/">
    <meta property="og:title" content="2022 ç¬¬44é€± cypress ç¶œåˆç­†è¨˜ï¼šå°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒã€æ­é… typescript ä½¿ç”¨ dayjs">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tzynwang.github.io/post/2022/cypress-note/">
    <meta property="twitter:title" content="2022 ç¬¬44é€± cypress ç¶œåˆç­†è¨˜ï¼šå°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒã€æ­é… typescript ä½¿ç”¨ dayjs">
    <meta property="twitter:description" content="">
    <meta property="twitter:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/_astro/index.5f60e57f.css" />
<link rel="stylesheet" href="/_astro/2-1-movie-list-i18n-note.5f900e92.css" /></head>
  <body class="astro-D4ZPMAD2">
    <section class="side-contnet astro-D4ZPMAD2">
      <h1 class="astro-D4ZPMAD2">æ™®é€šæ–‡çµ„ 2.0</h1>
      <nav class="astro-D4ZPMAD2">
        <a href="/" class="astro-D4ZPMAD2">é¦–é </a>
        <a href="/archive" class="astro-D4ZPMAD2">å…¨æ–‡ç« æ­¸æª”</a>
      </nav>
    </section>
    <section class="main-content astro-D4ZPMAD2">
      
  <div class="post-container astro-QTOKGA5Y">
    <h1 class="astro-QTOKGA5Y">2022 ç¬¬44é€± cypress ç¶œåˆç­†è¨˜ï¼šå°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒã€æ­é… typescript ä½¿ç”¨ dayjs</h1>
    <div class="info astro-QTOKGA5Y">
      <span class="astro-QTOKGA5Y">2022-11-04 21:15</span>
      <span class="astro-QTOKGA5Y"><span class="astro-2IYMVI75">
  cypress
</span><span class="astro-2IYMVI75">
  Testing
</span></span>
      <ul class="astro-QTOKGA5Y">
        <li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç¸½çµ" class="astro-QTOKGA5Y">ç¸½çµ</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç‰ˆæœ¬" class="astro-QTOKGA5Y">ç‰ˆæœ¬</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#ç­†è¨˜" class="astro-QTOKGA5Y">ç­†è¨˜</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#å°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒ" class="astro-QTOKGA5Y">å°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒ</a>
            </li><li class="toc-3 astro-QTOKGA5Y">
              <a href="#æ­é…-typescript-ä½¿ç”¨-dayjs" class="astro-QTOKGA5Y">æ­é… typescript ä½¿ç”¨ dayjs</a>
            </li><li class="toc-2 astro-QTOKGA5Y">
              <a href="#åƒè€ƒæ–‡ä»¶" class="astro-QTOKGA5Y">åƒè€ƒæ–‡ä»¶</a>
            </li>
      </ul>
    </div>
    <h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>ç´€éŒ„ä¸€ä¸‹é€™é€±åœ¨é€é cypress å¯« e2e è…³æœ¬æ™‚é‡åˆ°çš„å…©å€‹å•é¡Œï¼š</p>
<ul>
<li>å¦‚ä½•åœ¨ cypress ä¸­ï¼Œå°‡ã€ŒæŸå€‹å…ƒä»¶çš„å­˜åœ¨èˆ‡å¦ã€ä½œç‚ºæ¢ä»¶ä¾†æ’°å¯«æ¸¬è©¦è…³æœ¬ã€‚</li>
<li>å¦‚ä½•åœ¨ cypress ä¸­æ­é… typescript ä½¿ç”¨ dayjs å¥—ä»¶</li>
</ul>
<h2 id="ç‰ˆæœ¬">ç‰ˆæœ¬</h2>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #e1e4e8">cypress: 10.6.0</span></span></code></pre>
<h2 id="ç­†è¨˜">ç­†è¨˜</h2>
<h3 id="å°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒ">å°æ‡‰å…ƒä»¶å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å¢ƒ</h3>
<p>åœ¨ cypress ä¸­ç„¡æ³•ç›´æ¥è™•ç†ã€Œï¼ˆæ ¹æ“šæ¢ä»¶æŸ¥è©¢å¾Œï¼‰æŸå€‹ DOM å¯èƒ½ä¸å­˜åœ¨ã€çš„æƒ…å¢ƒï¼ˆæŸ¥è©¢å¾Œå¦‚æœæ‰¾ä¸åˆ°è©² DOM æœƒç›´æ¥æ‹‹éŒ¯ï¼‰ï¼Œè€Œå¦‚æœæ¸¬è©¦æƒ…å¢ƒæœƒæœ‰ã€ŒåŸ·è¡ŒæŸæ“ä½œå¾Œï¼Œæ ¹æ“šä¸åŒçš„æ¢ä»¶ï¼Œç•«é¢ä¸Šå¯èƒ½æœƒå‡ºç¾ X æˆ– Y å…ƒä»¶ï¼ˆå³ä¸ç®¡æŸ¥è©¢ X æˆ– Y éƒ½æœ‰å¯èƒ½æœƒå¾—åˆ°ã€Œä¸å­˜åœ¨ã€çš„çµæœï¼‰ã€ï¼Œé€™ç¨®æ™‚å€™å¯é€éä¸‹åˆ—æ–¹æ³•ä¾†ç¢ºèªã€Œåˆ°åº•æ˜¯å“ªä¸€å€‹å…ƒä»¶å‡ºç¾åœ¨ç•«é¢ä¸Šã€ï¼š</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #6A737D">// å…ˆé€é cy.get() æŠ“å–ä¸€å€‹å¿…å®šå­˜åœ¨çš„ DOM</span></span>
<span class="line"><span style="color: #E1E4E8">cy.</span><span style="color: #B392F0">get</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">'body'</span><span style="color: #E1E4E8">).</span><span style="color: #B392F0">then</span><span style="color: #E1E4E8">((</span><span style="color: #FFAB70">$body</span><span style="color: #E1E4E8">) </span><span style="color: #F97583">=></span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// æ¥è‘—å†å¾ä¸Šä¸€è¡Œå–å¾—çš„ body element ä¸­ç¢ºèªç›®æ¨™ DOM æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">isComponentX</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">!!</span><span style="color: #E1E4E8">$body.</span><span style="color: #B392F0">find</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">'.here-is-the-condition'</span><span style="color: #E1E4E8">).</span><span style="color: #79B8FF">length</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">></span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">0</span><span style="color: #E1E4E8">;</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">if</span><span style="color: #E1E4E8"> (isComponentX) {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// é‡å° component X çš„æ¸¬è©¦è…³æœ¬</span></span>
<span class="line"><span style="color: #E1E4E8">  } </span><span style="color: #F97583">else</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// é‡å° component Y çš„æ¸¬è©¦è…³æœ¬</span></span>
<span class="line"><span style="color: #E1E4E8">  }</span></span>
<span class="line"><span style="color: #E1E4E8">});</span></span></code></pre>
<p>å…ˆé€é <code>cy.get('body')</code> å–å¾—ã€Œå¿…å®šåœ¨ç•«é¢ä¸Šçš„å®¹å™¨å…ƒä»¶ã€ï¼Œå†é€é <code>$body.find('...')</code> ä¾†ç¢ºèª <code>$body</code> ï¼ˆå®¹å™¨å…ƒä»¶ï¼‰ä¸­æ˜¯å¦æœ‰ç¬¦åˆæŸæŸ¥è©¢æ¢ä»¶çš„å…ƒä»¶ã€‚</p>
<p>æ¥ä¸‹ä¾†å°±å¯é€é <code>isComponentX</code> ä¾†æ’°å¯«é‡å°å…ƒä»¶ X èˆ‡ Y çš„æ¸¬è©¦ã€‚</p>
<h3 id="æ­é…-typescript-ä½¿ç”¨-dayjs">æ­é… typescript ä½¿ç”¨ dayjs</h3>
<p>åœ¨ cypress <code>10.6.0</code> ç‰ˆæœ¬ä¸­ï¼Œé–‹å•Ÿ <code>cypress/support/commands.ts</code> è¿½åŠ ä»¥ä¸‹å…§å®¹ï¼š</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #6A737D">/// &#x3C;</span><span style="color: #85E89D">reference</span><span style="color: #6A737D"> </span><span style="color: #B392F0">types</span><span style="color: #F97583">=</span><span style="color: #9ECBFF">"cypress"</span><span style="color: #6A737D"> /></span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> dayjs </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'dayjs'</span><span style="color: #E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">declare</span><span style="color: #E1E4E8"> global {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">namespace</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Cypress</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">interface</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Chainable</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #6A737D">// é€™é‚Šç”¨ä¸åˆ°ï¼Œè·³é</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">interface</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Cypress</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #6A737D">// å°‡ dayjs è¿½åŠ åˆ° Cypress.Cypress namespace ä¸­</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #B392F0">dayjs</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">date</span><span style="color: #F97583">?:</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">dayjs</span><span style="color: #E1E4E8">.</span><span style="color: #B392F0">ConfigType</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">:</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">dayjs</span><span style="color: #E1E4E8">.</span><span style="color: #B392F0">Dayjs</span><span style="color: #E1E4E8">;</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">  }</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// æœ€å¾Œå°‡ dayjs è³¦å€¼çµ¦ Cypress.dayjs</span></span>
<span class="line"><span style="color: #E1E4E8">Cypress.dayjs </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> dayjs;</span></span></code></pre>
<p>ä¹‹å¾Œåœ¨è…³æœ¬ä¸­å³å¯é€é <code>Cypress.dayjs</code> ä½¿ç”¨ dayjs åŠŸèƒ½ï¼š</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #6A737D">/// &#x3C;</span><span style="color: #85E89D">reference</span><span style="color: #6A737D"> </span><span style="color: #B392F0">types</span><span style="color: #F97583">=</span><span style="color: #9ECBFF">"cypress"</span><span style="color: #6A737D"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">describe</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">'[dayjs]'</span><span style="color: #E1E4E8">, () </span><span style="color: #F97583">=></span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #B392F0">it</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">'should be able to use dayjs'</span><span style="color: #E1E4E8">, () </span><span style="color: #F97583">=></span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">dayjsString</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> Cypress.</span><span style="color: #B392F0">dayjs</span><span style="color: #E1E4E8">().</span><span style="color: #B392F0">format</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">'YYYY-MM-DD'</span><span style="color: #E1E4E8">);</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">expect</span><span style="color: #E1E4E8">(dayjsString).to.</span><span style="color: #B392F0">equal</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">'2022-11-05'</span><span style="color: #E1E4E8">);</span></span>
<span class="line"><span style="color: #E1E4E8">  });</span></span>
<span class="line"><span style="color: #E1E4E8">});</span></span></code></pre>
<p><img src="/2022/cypress-note/testResult.png" alt="dayjs in cypress"></p>
<h2 id="åƒè€ƒæ–‡ä»¶">åƒè€ƒæ–‡ä»¶</h2>
<ul>
<li><a href="https://docs.cypress.io/api/commands/find">cypress: find</a></li>
<li><a href="https://docs.cypress.io/api/commands/get">cypress: get</a></li>
<li><a href="https://github.com/cypress-io/cypress-example-recipes/blob/cc13866e55bd28e1d1323ba6d498d85204f292b5/examples/blogs__dayjs/README.md">cypress-example-recipes: dayjs</a></li>
<li><a href="https://stackoverflow.com/questions/56145926/how-to-check-if-element-exists-using-cypress-io">How to check if element exists using Cypress.io</a></li>
</ul>
  </div>

      <footer class="astro-QLGQ3ONJ">Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan</footer>
    </section>
  </body></html>